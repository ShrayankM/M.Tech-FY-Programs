21
BEGIN(T1)
LOCK-X(A)_T1
READ(A)_T1
WRITE(A)_T1
BEGIN(T2)
LOCK-X(B)_T2
WRITE(B)_T2
LOCK-X(B)_T1
READ(A)_T1
READ(B)_T1
COMMIT(T2)
COMMIT(T1)
BEGIN(T4)
LOCK-X(C)_T4
BEGIN(T3)
LOCK-S(D)_T3
LOCK-S(C)_T3
LOCK-S(D)_T4
READ(C)_T3
COMMIT(T4)
COMMIT(T3)
